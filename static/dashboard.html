<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alocação - Dashboard</title>
  <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
  <div class="container">
    <!-- Cabeçalho -->
    <div class="header">
      <div class="logo">
        <img src="/static/logoclaro.png" alt="Logo Claro">
      </div>
      <div class="user-info" id="user-info">Usuário: </div>
    </div>

    <!-- Filtros -->
    <div class="filters-container">
      <div class="filters-left">
        <div class="filter-row">
          <select id="tipo-projeto-atividade">
            <option>Tipo Projeto/Atividade</option>
            <option>Projeto</option>
            <option>Atividade</option>
          </select>
          <select id="projeto">
            <option>Projeto</option>
            <option>Projeto A</option>
            <option>Projeto B</option>
          </select>
          <select id="atividade">
            <option>Atividade</option>
            <option>Atividade 1</option>
            <option>Atividade 2</option>
          </select>
        </div>
      </div>
      <div class="filters-right">
        <div class="filter-row">
          <input type="date" id="data-inicio" placeholder="Data Início">
          <input type="date" id="data-fim" placeholder="Data Fim">
        </div>
      </div>
    </div>
    <div class="filters-bottom">
      <input type="number" id="quantidade" placeholder="Quantidade" min="0">
      <select id="metrica">
        <option value="horas/mês">horas/mês</option>
        <option value="percentual/mês">percentual/mês</option>
      </select>
      <button onclick="aplicarAlocacao()">Aplicar</button>
    </div>

    <!-- Navegação e título do calendário -->
    <div class="calendar-nav">
      <button onclick="previousMonth()">← Anterior</button>
      <h1 class="calendar-title" id="calendar-title"></h1>
      <button onclick="nextMonth()">Próximo →</button>
    </div>

    <!-- Calendário -->
    <div class="calendar" id="calendar">
      <div class="calendar-header" id="calendar-header"></div>
      <div class="calendar-days" id="calendar-days"></div>
    </div>

    <!-- Legenda -->
    <div class="legend">
      <div><span class="color-box green"></span> Verde: 100% do dia preenchido</div>
      <div><span class="color-box yellow"></span> Amarelo: Abaixo de 100%</div>
      <div><span class="color-box red"></span> Vermelho: Acima de 100%</div>
    </div>

    <!-- Barra inferior com contador -->
    <div class="footer-bar">
      <button class="add-btn">+</button>
      <span class="counter" id="counter">0</span>
    </div>
  </div>

  <script src="/static/js/dashboard.js"></script>
  <script>
    // Verificação de autenticação
    if (!localStorage.getItem('isAuthenticated')) {
      alert('Você precisa fazer login para acessar esta página.');
      window.location.href = '/static/login.html';
    } else {
      document.getElementById('user-info').textContent = 'Usuário: ' + localStorage.getItem('username');
    }
  </script>
</body>
</html>
